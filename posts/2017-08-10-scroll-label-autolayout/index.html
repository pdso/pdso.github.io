<!DOCTYPE html><html lang="zh"><head><title>pd🤩 - iOS Developer</title><meta name="twitter:title" content="pd🤩 - iOS Developer"/><meta name="og:title" content="pd🤩 - iOS Developer"/><meta charset="UTF-8" name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="https://unpkg.com/purecss@1.0.1/build/pure-min.css" integrity="sha384-oAOxQR6DkCoMliIh8yFnu25d7Eq/PHS21PClpwjOTeU2jRSq11vu66rf90/cZr47" crossorigin="anonymous"/><link rel="stylesheet" href="https://unpkg.com/purecss@1.0.1/build/grids-responsive-min.css"/><link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css"/><link rel="stylesheet" href="/Pure/styles.css"/><link rel="stylesheet" href="/all.css"/></head><body><div id="layout" class="pure-g"><div><div class="pure-menu pure-menu-horizontal pure-u-1-1 top-header"><a class="pure-menu-heading" href="/">Just do it</a><ul class="pure-menu-list"><li class="pure-menu-item"><a class="pure-menu-link" href="/about">About</a></li><li class="pure-menu-item"><a class="pure-menu-link" href="/posts">Notes</a></li><li class="pure-menu-item"><a class="pure-menu-link" href="/life">Life</a></li><li class="pure-menu-item"><a class="pure-menu-link" href="/other">Other</a></li></ul></div></div><div class="sidebar pure-u-1 pure-u-md-1-4"><div class="header"><div id="layout" class="pure-g"><div class="author__avatar"><img src="https://avatars.githubusercontent.com/u/8196592?v=4"/></div><div class="pure-u-md-1-1 pure-u-3-4"><h1 class="brand-title">pd🤩</h1><h3 class="brand-tagline">iOS Developer</h3></div></div><div id="layout" class="pure-g"><div class="pure-u-md-1-1"><a href="https://en.wikipedia.org/wiki/Shenzhen"><i class="fas fa-map-marker-alt l-box social-icon"></i><a class="social-media" href="https://en.wikipedia.org/wiki/Shenzhen">深圳, 广东</a></a></div><div class="pure-u-md-1-1"><a href="mailto:alan.funs@gmail.com"><i class="fas fa-envelope-open-text l-box social-icon"></i><a class="social-media" href="mailto:alan.funs@gmail.com">Email</a></a></div><div class="pure-u-md-1-1"><a href="https://github.com/pdso"><i class="fab fa-github-square l-box social-icon"></i><a class="social-media" href="https://github.com/pdso">GitHub</a></a></div></div></div></div><div class="content pure-u-1 pure-u-md-3-5 pure-u-xl-6-10"><h2 class="post-title"><a href="/posts/2017-08-10-scroll-label-autolayout">scroll-label-autolayout</a></h2><div class="post-meta"><div class="post-date">August 10, 2017</div><div class="post-tags"><a class="post-category post-category-ios tag variant-1" href="/tags/ios">iOS</a><a class="post-category post-category-uikit tag variant-6" href="/tags/uikit">UIKit</a></div></div><div class="post-description"><div><h2>需求</h2><p>最开始设计图是这样的,居中显示一段文字,颜色xx,字体大小xx。</p><pre data-language="Swift"><code><span class="hljs-keyword">let</span> label: <span class="hljs-type">UILabel</span> = <span class="hljs-type">UILabel</span>()
label.text = <span class="hljs-string">"bababal..."</span>
label.font = <span class="hljs-type">UIFont</span>.systemFontsize(<span class="hljs-number">1.0</span>)
label.textalign = .center
label.snp.makeConstraints{ (make) <span class="hljs-keyword">in</span>
    make.<span class="hljs-keyword">left</span>.top.<span class="hljs-keyword">right</span>.<span class="hljs-built_in">equal</span>(<span class="hljs-number">0</span>)
}
</code></pre><p>几行代码搞定。后来需求说文字可能有点多要换行。于是再加一行代码</p><pre data-language="Swift"><code>label.numberoflines = <span class="hljs-number">0</span>
</code></pre><p>后来又说文字可能更多，更多的文字显示 ... 再后来又说...的文字要显示出来，超出固定高度的要滚动。</p><p>于是需求成这样了，在一定的高度范围内显示一行长度未知的文字，文字超过固定高度时滚动。</p><h2>尝试</h2><p>拆分下需求 <em> 文字不超过一行，居中不滚动 </em> 文字超过一行，不超过固定高度，不滚动，居中自动换行 * 文字超过一行, 超过固定高度，滚动，居中自动换行</p><p>能滚动的<code>UILabel</code>, 一开始想到的是<code>UITextView</code>, 试了下发现不超过一行的时候也会滚动，而且不能居中。 需要添加各种判断和限制才能达到想要的效果。 于是便考虑用<code>UIScorllView</code> + <code>UILabel</code>来实现。</p><h2>解决方案</h2><pre data-language="Swift"><code>└── <span class="hljs-type">View</span>
    └── scrollView
        └── contentView
            └── label
</code></pre><ol><li>scrollView 设置上下左右约束</li><li>contentView 上下左右约束为0, 水平垂直居中，bottom和CenterY约束<code>Priority</code>调到最低250</li><li>label 上左右约束为0，Lines设置为0</li><li>设置contentView和label Equal Heights.</li></ol><img src="/images/pelican/scrollLabel.png" width="300"/></div></div><div id="disqus_thread"></div><script src="/Scripts/disqus.js"></script><noscript>Please enable JavaScript to view the comments</noscript></div><div class="footer pure-u-1"><div class="pure-u-1">© 2015-2022 pd🤩</div><div class="pure-u-1">Generated using <a href="https://github.com/johnsundell/publish">Publish</a></div></div></div></body></html>