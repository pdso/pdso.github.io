<!DOCTYPE html><html lang="zh"><head><title>pdğŸ¤© - iOS Developer</title><meta name="twitter:title" content="pdğŸ¤© - iOS Developer"/><meta name="og:title" content="pdğŸ¤© - iOS Developer"/><meta charset="UTF-8" name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="https://unpkg.com/purecss@1.0.1/build/pure-min.css" integrity="sha384-oAOxQR6DkCoMliIh8yFnu25d7Eq/PHS21PClpwjOTeU2jRSq11vu66rf90/cZr47" crossorigin="anonymous"/><link rel="stylesheet" href="https://unpkg.com/purecss@1.0.1/build/grids-responsive-min.css"/><link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css"/><link rel="stylesheet" href="/Pure/styles.css"/><link rel="stylesheet" href="/all.css"/><script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script></head><body><div id="layout" class="pure-g"><div><div class="pure-menu pure-menu-horizontal pure-u-1-1 top-header"><a class="pure-menu-heading" href="/">Just do it</a><ul class="pure-menu-list"><li class="pure-menu-item"><a class="pure-menu-link" href="/about">About</a></li><li class="pure-menu-item"><a class="pure-menu-link" href="/posts">Notes</a></li><li class="pure-menu-item"><a class="pure-menu-link" href="/life">Life</a></li><li class="pure-menu-item"><a class="pure-menu-link" href="/other">Other</a></li></ul></div></div><div class="sidebar pure-u-1 pure-u-md-1-4"><div class="header"><div id="layout" class="pure-g"><div class="author__avatar"><img src="https://avatars.githubusercontent.com/u/8196592?v=4"/></div><div class="pure-u-md-1-1 pure-u-3-4"><h1 class="brand-title">pdğŸ¤©</h1><h3 class="brand-tagline">iOS Developer</h3></div></div><div id="layout" class="pure-g"><div class="pure-u-md-1-1"><a href="https://en.wikipedia.org/wiki/Shenzhen"><i class="fas fa-map-marker-alt l-box social-icon"></i><a class="social-media" href="https://en.wikipedia.org/wiki/Shenzhen">æ·±åœ³, å¹¿ä¸œ</a></a></div><div class="pure-u-md-1-1"><a href="mailto:alan.funs@gmail.com"><i class="fas fa-envelope-open-text l-box social-icon"></i><a class="social-media" href="mailto:alan.funs@gmail.com">Email</a></a></div><div class="pure-u-md-1-1"><a href="https://github.com/pdso"><i class="fab fa-github-square l-box social-icon"></i><a class="social-media" href="https://github.com/pdso">GitHub</a></a></div></div></div></div><div class="content pure-u-1 pure-u-md-3-5 pure-u-xl-6-10"><h2 class="post-title"><a href="/posts/2015-06-08-not-found-metal-for-architecture-armv7">not found metal for architecture armv7</a></h2><div class="post-meta"><div class="post-date">June 8, 2015</div><div class="post-tags"><a class="post-category post-category-ios tag variant-1" href="/tags/ios">iOS</a><a class="post-category post-category-xcode tag variant-7" href="/tags/xcode">Xcode</a></div></div><div class="post-description"><div><h1>The scene</h1><p>ä»¥ä¸‹æ¡ä»¶Xcodeæ‰ä¼šæŠ¥è¿™ä¸ªé”™è¯¯:</p><ul><li><code>build target</code>æ˜¯çœŸæœºä¸æ˜¯æ¨¡æ‹Ÿå™¨</li><li><code>other link flags</code> æ·»åŠ äº† <code>-ObjC</code></li><li>é™æ€åº“æ˜¯ç”¨<code>8.0</code>ä»¥ä¸Šçš„çš„SDKæ‰“åŒ…,ä½¿ç”¨çš„æ—¶å€™Xcodeçš„<code>iPhone SDK</code>å°äº<code>8.0</code>,æ¢å¥è¯è¯´å°±æ˜¯Xcode6æ‰“åŒ…çš„é™æ€åº“ç”¨Xcode5æ¥è¿è¡Œ</li></ul><h1>The Reason</h1><p>å…¶å®è¿™æ˜¯è‹¹æœçš„ä¸€ä¸ªbug.æ²¡æœ‰å¯¹<code>no-Metal</code>çš„è®¾å¤‡å³<code>armv7&amp;armv7s</code>åšå‘åå…¼å®¹</p><p><code>CoreVideo.h</code>å¯ä»¥çœ‹å‡ºæ¥è¿™ç‚¹:</p><pre data-language="undefined"><code>
#if COREVIDEO_SUPPORTS_METAL
#include <CoreVideo/CVMetalTexture.h>
#include <CoreVideo/CVMetalTextureCache.h>
#endif
</code></pre><p><code>COREVIDEO_SUPPORTS_METAL</code>æ˜¯è¿™æ ·å®šä¹‰çš„:<code>#if TARGET_OS_IPHONE</code>,è¿™æ˜¯ä¸å¤Ÿçš„,å› ä¸º<code>armv7/s</code>è®¾å¤‡ä¸æ”¯æŒ<code>Metal</code></p><h2>Link Frameworks Automatically</h2><p><code>XCode5</code>è‹¹æœå¼•è¿›äº†æ–°<code>links</code>flags,<code>Link Frames Automatically</code>,<code>Defalut</code>å€¼æ˜¯<code>YES</code>.ç›®çš„ä¸ºäº†å‡å°‘å¼€å‘è€…æ·»åŠ <code>framework</code>çš„å·¥ä½œé‡.åœ¨å¼•å…¥è¿™ä¸ªä¹‹å‰å¼€å‘è€…ä½¿ç”¨<code>framework</code>å¿…é¡»<code>link</code>åˆ°å·¥ç¨‹ã€‚è¿™ä¸ª<code>flag</code>è®©å¼€å‘è€…ä»¬æ›´ç®€å•çš„ä½¿ç”¨<code>framework</code>. å¯¹æŠ¥é”™çš„<code>framework</code>æ‰§è¡Œä»¥ä¸‹å‘½ä»¤:</p><p><code>otool -arch armv7 â€“l Xxxxx.framework/Xxxxx</code></p><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ä»¥ä¸‹å†…å®¹:</p><pre data-language="undefined"><code>
Load command 14
cmd LC_LINKER_OPTION
cmdsize 32
count 2
string #1 -framework
string #2 OpenGLES
Load command 15

cmd LC_LINKER_OPTION
cmdsize 32
count 2
string #1 -framework
string #2 Metal
Load command 16
</code></pre><p>æ­£å¦‚ä½ æ‰€çœ‹åˆ°çš„,è¿™å°†å¯¼è‡´<code>linker</code>éšå¼ä½¿ç”¨<code>Metal</code></p><h1>The Solution</h1><p>åœ¨è‹¹æœæ²¡è§£å†³è¿™ä¸ªé—®é¢˜ä¹‹å‰ã€‚å¯ä»¥é€šè¿‡ä»¥ä¸‹ä¸¤ç§æ–¹æ³•æ¥é¿å…ç¼–è¯‘é”™è¯¯:</p><p>1&gt;. ç›´æ¥ç”¨Xcode5æ¥ç”Ÿæˆ<code>lib</code>å’Œ<code>framework</code></p><p>2&gt;. Xcode6 <code>Build Setting</code>--&gt;<code>Link Frameworks Automatically</code>è®¾ç½®ä¸ºNO,è®¾ç½®è¿™ä¸ªä¹‹å,Xcode å¯èƒ½ä¼šæŠ¥æ›´å¤šçš„é”™è¯¯,å› ä¸ºç°åœ¨ä¸ä¼šè‡ªåŠ¨<code>link</code>æ¡†æ¶äº†,æ ¹æ®æŠ¥é”™æ·»åŠ å¯¹åº”çš„<code>framework</code>å³å¯.</p><h1>From</h1><p><a href="https://www.appsee.com/blog/dev/xcode-new-link-frameworks-automatically-fix-framework-not-found-metal-for-architecture-armv7">framework not found Metal for architecture armv7</a></p></div></div></div><div class="footer pure-u-1"><div class="pure-u-1">Â© 2015-2023 pdğŸ¤©</div><div class="pure-u-1">Generated using <a href="https://github.com/johnsundell/publish">Publish</a></div></div></div></body></html>