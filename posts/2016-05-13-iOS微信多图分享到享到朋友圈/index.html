<!DOCTYPE html><html lang="zh"><head><title>pdğŸ¤© - iOS Developer</title><meta name="twitter:title" content="pdğŸ¤© - iOS Developer"/><meta name="og:title" content="pdğŸ¤© - iOS Developer"/><meta charset="UTF-8" name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="https://unpkg.com/purecss@1.0.1/build/pure-min.css" integrity="sha384-oAOxQR6DkCoMliIh8yFnu25d7Eq/PHS21PClpwjOTeU2jRSq11vu66rf90/cZr47" crossorigin="anonymous"/><link rel="stylesheet" href="https://unpkg.com/purecss@1.0.1/build/grids-responsive-min.css"/><link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css"/><link rel="stylesheet" href="/Pure/styles.css"/><link rel="stylesheet" href="/all.css"/></head><body><div id="layout" class="pure-g"><div><div class="pure-menu pure-menu-horizontal pure-u-1-1 top-header"><a class="pure-menu-heading" href="/">Just do it</a><ul class="pure-menu-list"><li class="pure-menu-item"><a class="pure-menu-link" href="/about">About</a></li><li class="pure-menu-item"><a class="pure-menu-link" href="/posts">Notes</a></li><li class="pure-menu-item"><a class="pure-menu-link" href="/life">Life</a></li><li class="pure-menu-item"><a class="pure-menu-link" href="/other">Other</a></li></ul></div></div><div class="sidebar pure-u-1 pure-u-md-1-4"><div class="header"><div id="layout" class="pure-g"><div class="author__avatar"><img src="https://avatars.githubusercontent.com/u/8196592?v=4"/></div><div class="pure-u-md-1-1 pure-u-3-4"><h1 class="brand-title">pdğŸ¤©</h1><h3 class="brand-tagline">iOS Developer</h3></div></div><div id="layout" class="pure-g"><div class="pure-u-md-1-1"><a href="https://en.wikipedia.org/wiki/Vilnius"><i class="fas fa-map-marker-alt l-box social-icon"></i><a class="social-media" href="https://en.wikipedia.org/wiki/Vilnius">æ·±åœ³, å¹¿ä¸œ</a></a></div><div class="pure-u-md-1-1"><a href="mailto:alan.funs@gmail.com"><i class="fas fa-envelope-open-text l-box social-icon"></i><a class="social-media" href="mailto:alan.funs@gmail.com">Email</a></a></div><div class="pure-u-md-1-1"><a href="https://github.com/pdso"><i class="fab fa-github-square l-box social-icon"></i><a class="social-media" href="https://github.com/pdso">GitHub</a></a></div></div></div></div><div class="content pure-u-1 pure-u-md-3-5 pure-u-xl-6-10"><h2 class="post-title"><a href="/posts/2016-05-13-iOSå¾®ä¿¡å¤šå›¾åˆ†äº«åˆ°äº«åˆ°æœ‹å‹åœˆ">iOSå¾®ä¿¡å¤šå›¾åˆ†äº«åˆ°äº«åˆ°æœ‹å‹åœˆ</a></h2><div class="post-meta"><div class="post-date">May 13, 2016</div><div class="post-tags"><a class="post-category post-category-ios tag variant-1" href="/tags/ios">iOS</a><a class="post-category post-category-uikit tag variant-6" href="/tags/uikit">UIKit</a></div></div><div class="post-description"><div><p>iOSç³»ç»Ÿåˆ†äº«å¤šå¼ å›¾ç‰‡åˆ°å¾®ä¿¡æœ‹å‹åœˆ</p><h2>å¾®ä¿¡åˆ†äº«å¤šå¼ å›¾ç‰‡åˆ°å¾®ä¿¡æœ‹åœˆ</h2><p>æœ€è¿‘æœ‰ä¸ªéœ€æ±‚ï¼Œè¦åˆ†äº«å¤šå¼ å›¾ç‰‡åˆ°å¾®ä¿¡æœ‹å‹åœˆã€‚å¯¼å…¥å¾®ä¿¡SDK,çœ‹äº†ä¸‹å¾®ä¿¡çš„æ¥å£,å„ç§é™åˆ¶ï¼Œæ ¹æœ¬æ²¡åŠæ³•æã€‚BOSSä¸€å®šè¦å®ç°ï¼Œæ²¡åŠæ³•åªèƒ½æŠ˜è…¾äº†ã€‚ æœ€åé€šè¿‡ç³»ç»Ÿçº§åˆ«çš„åˆ†äº«<code>UIActivityViewController</code>æ¥å®ç°äº†è¿™ä¸ªåŠŸèƒ½ã€‚</p><h2>UIActivityViewController</h2><p>è¿™ä¸ªç±»å¾ˆç®€å•å¤´æ–‡ä»¶æ€»å…±ä¹Ÿå°±å‡ ä¸ªåˆå§‹åŒ–æ–¹æ³•å’Œå›è°ƒã€‚æ”¯æŒ6.0ä»¥ä¸Šçš„ç³»ç»Ÿã€‚åˆå§‹åŒ–ç„¶åå¼¹å‡ºè§†å›¾å°±OKäº†ã€‚ç›´æ¥ä¸Šä»£ç äº†ã€‚</p><h2>Code</h2><h3>å¾®ä¿¡SDKçš„ä¸€äº›è®¾ç½®å°±ä¸å¤šè¯´äº†ã€‚</h3><h3>åˆ†äº«åˆ°å¾®ä¿¡çš„éƒ¨åˆ†ä»£ç </h3><pre data-language="swift"><code><span class="hljs-keyword">self</span>.showHUD()
<span class="hljs-type">UIPasteboard</span>.generalPasteboard().string = <span class="hljs-string">"å¾®ä¿¡å¤šå›¾åˆ†äº«åˆ°æœ‹å‹åœˆ"</span>
<span class="hljs-keyword">let</span> imageCache:<span class="hljs-type">SDImageCache</span> = <span class="hljs-type">SDImageCache</span>.sharedImageCache()
<span class="hljs-keyword">var</span> imageArr:[<span class="hljs-type">AnyObject</span>] = []
<span class="hljs-keyword">for</span> imageUrl <span class="hljs-keyword">in</span> <span class="hljs-keyword">self</span>.dataArr {
<span class="hljs-keyword">let</span> imagepath:<span class="hljs-type">String</span> = imageCache.defaultCachePathForKey(imageUrl.stringValue)
<span class="hljs-keyword">if</span> <span class="hljs-type">NSFileManager</span>.defaultManager().fileExistsAtPath(imagepath) {
    imageArr.append(<span class="hljs-type">NSURL</span>.<span class="hljs-keyword">init</span>(fileURLWithPath: imagepath))
 }
}
<span class="hljs-keyword">let</span> activityView: <span class="hljs-type">UIActivityViewController</span> = <span class="hljs-type">UIActivityViewController</span>.<span class="hljs-keyword">init</span>(activityItems: imageArr, applicationActivities: <span class="hljs-literal">nil</span>)
 <span class="hljs-keyword">self</span>.hideHUDWithCompletionMessage(<span class="hljs-string">"åˆ†äº«çš„å†…å®¹å·²ç»å¤åˆ¶åˆ°ç²˜è´´æ¿"</span>, finishedHandler: {
     <span class="hljs-keyword">self</span>.navigationController?.presentViewController(activityView, animated: <span class="hljs-literal">true</span>, completion: <span class="hljs-literal">nil</span>)
 })
</code></pre><h2>ä»£ç è¯´æ˜</h2><ul><li>dataArræ˜¯ä¸€ä¸ªå‚¨å­˜å›¾ç‰‡çš„æ•°ç»„</li><li>ä½¿ç”¨äº†<code>SDWebImage</code>æ¥æ˜¾ç¤ºå›¾ç‰‡å°±æ²¡å¦å¤–å†™å›¾ç‰‡ä¸‹è½½åŠŸèƒ½ã€‚åˆ†äº«çš„æ—¶å€™ç›´æ¥å–<code>SDWebImageView</code>å›¾ç‰‡ç¼“å­˜</li><li>è¯•äº†å¥½å¤šæ¬¡<code>activityItems</code>é‡Œé¢çš„å…ƒç´ ä¸º<code>UIImage</code>æˆ–è€…<code>NSURL</code>çš„æ—¶å€™ç»å¸¸å¤±è´¥ã€‚åªèƒ½åˆ†äº«ä¸€æ¬¡ï¼Œé‡æ–°æ‰“å¼€Appåæ‰èƒ½ç»§ç»­åˆ†äº«.ä»æœ¬åœ°æ²™ç›’è¯»åˆ°å›¾ç‰‡è¿™æ ·æˆåŠŸç‡æœ€é«˜</li></ul><h2>å­˜åœ¨çš„é—®é¢˜</h2><blockquote><p>æ²¡åŠæ³•æ·»åŠ æ–‡å­—ã€‚æš‚æ—¶èƒ½é€šè¿‡å¤åˆ¶ç²˜è´´çš„æ–¹å¼å®ç°ã€‚</p></blockquote><hr><blockquote><p>åœ¨<code>Swift</code>å‡º3.0å‰åˆé‡æ–°ä½“éªŒäº†ä¸‹ã€‚æ¯”<code>Objective C</code>å†™èµ·æ¥è¦çˆ½ã€‚<code>Swift</code>ä»ç²¾é€šåˆ°é‡æ–°å…¥é—¨.ğŸ˜¬ğŸ˜°</p></blockquote></div></div><div id="disqus_thread"></div><script src="/Scripts/disqus.js"></script><noscript>Please enable JavaScript to view the comments</noscript></div><div class="footer pure-u-1"><div class="pure-u-1">Â© 2015-2022 pdğŸ¤©</div><div class="pure-u-1">Generated using <a href="https://github.com/johnsundell/publish">Publish</a></div></div></div></body></html>