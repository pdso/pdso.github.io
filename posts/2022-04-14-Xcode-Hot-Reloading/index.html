<!DOCTYPE html><html lang="zh"><head><title>pdğŸ¤© - iOS Developer</title><meta name="twitter:title" content="pdğŸ¤© - iOS Developer"/><meta name="og:title" content="pdğŸ¤© - iOS Developer"/><meta charset="UTF-8" name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="https://unpkg.com/purecss@1.0.1/build/pure-min.css" integrity="sha384-oAOxQR6DkCoMliIh8yFnu25d7Eq/PHS21PClpwjOTeU2jRSq11vu66rf90/cZr47" crossorigin="anonymous"/><link rel="stylesheet" href="https://unpkg.com/purecss@1.0.1/build/grids-responsive-min.css"/><link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css"/><link rel="stylesheet" href="/Pure/styles.css"/><link rel="stylesheet" href="/all.css"/><script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script></head><body><div id="layout" class="pure-g"><div><div class="pure-menu pure-menu-horizontal pure-u-1-1 top-header"><a class="pure-menu-heading" href="/">Just do it</a><ul class="pure-menu-list"><li class="pure-menu-item"><a class="pure-menu-link" href="/about">About</a></li><li class="pure-menu-item"><a class="pure-menu-link" href="/posts">Notes</a></li><li class="pure-menu-item"><a class="pure-menu-link" href="/life">Life</a></li><li class="pure-menu-item"><a class="pure-menu-link" href="/other">Other</a></li></ul></div></div><div class="sidebar pure-u-1 pure-u-md-1-4"><div class="header"><div id="layout" class="pure-g"><div class="author__avatar"><img src="https://avatars.githubusercontent.com/u/8196592?v=4"/></div><div class="pure-u-md-1-1 pure-u-3-4"><h1 class="brand-title">pdğŸ¤©</h1><h3 class="brand-tagline">iOS Developer</h3></div></div><div id="layout" class="pure-g"><div class="pure-u-md-1-1"><a href="https://en.wikipedia.org/wiki/Shenzhen"><i class="fas fa-map-marker-alt l-box social-icon"></i><a class="social-media" href="https://en.wikipedia.org/wiki/Shenzhen">æ·±åœ³, å¹¿ä¸œ</a></a></div><div class="pure-u-md-1-1"><a href="mailto:alan.funs@gmail.com"><i class="fas fa-envelope-open-text l-box social-icon"></i><a class="social-media" href="mailto:alan.funs@gmail.com">Email</a></a></div><div class="pure-u-md-1-1"><a href="https://github.com/pdso"><i class="fab fa-github-square l-box social-icon"></i><a class="social-media" href="https://github.com/pdso">GitHub</a></a></div></div></div></div><div class="content pure-u-1 pure-u-md-3-5 pure-u-xl-6-10"><h2 class="post-title"><a href="/posts/2022-04-14-Xcode-Hot-Reloading">Xcode Hot Reloading</a></h2><div class="post-meta"><div class="post-date">April 14, 2022</div><div class="post-tags"><a class="post-category post-category-xcode tag variant-6" href="/tags/xcode">Xcode</a><a class="post-category post-category-swiftui tag variant-5" href="/tags/swiftui">SwiftUI</a></div></div><div class="post-description"><div><p>æœ€è¿‘å‡ å¹´å¾ˆå°‘å†™åŸç”Ÿçš„iOSç¨‹åºï¼Œå†™çš„å¤šçš„æ˜¯ <code>React Native</code> å’Œ<code> Flutter</code>ï¼Œä»–ä»¬éƒ½æ”¯æŒHot Reloading, ä¸ç”¨é‡æ–°è¿è¡Œå°±èƒ½çœ‹åˆ°æœ€æ–°çš„UIæ•ˆæœã€‚ç›¸æ¯”ä¹‹ä¸‹XcodeçœŸçš„é€Šè‰²å¾ˆå¤šï¼Œæœ€è¿‘å†™SwiftUIå°è¯•äº†ä¸€ä¸‹Preview åŠŸèƒ½ï¼Œå®åœ¨æ˜¯å¤ªå¼±é¸¡äº†ï¼ŒGoogleäº†ä¸€ä¸‹è§£å†³æ–¹æ¡ˆï¼Œè¿˜çœŸæœ‰Xcode Hot Reloadingã€‚è®°å½•ä¸€ä¸‹ã€‚</p><h1>Steps</h1><h2>å‚è€ƒæ–‡æ¡£</h2><p>github <a href="https://github.com/johnno1962/InjectionIII">InjectionIII</a> github <a href="https://github.com/krzysztofzablocki/Inject">Inject</a></p><h2>é…ç½®</h2><h3>InjectionIIIé…ç½®</h3><ul><li>ä»AppStoreä¸‹è½½ <a href="https://apps.apple.com/app/injectioniii/id1380446739">InjectionIII</a></li></ul><ul><li>å®‰è£…åæ‰“å¼€InjectionIII, åœ¨æ¡Œé¢æ˜¯çœ‹ä¸åˆ°InjectoinIIIçª—å£çš„ï¼Œç‚¹å‡»çŠ¶æ€æ å›¾æ ‡ï¼Œé€‰æ‹©Open Project,é€‰æ‹©é¡¹ç›®ç›®å½•</li></ul><img src="/images/notes/injection_01.png" align=left/><ul><li>å‹¾é€‰File Watcheré€‰é¡¹, é€‰æ‹©çš„é¡¹ç›®ä¼šåœ¨OPen Recentä¸­å±•ç¤º</li></ul><img src="/images/notes/injection_02.png" align=left/><h3>SwiftUIé¡¹ç›®é…ç½®</h3><ul><li>æ‰“å¼€å·¥ç¨‹ï¼Œé€‰æ‹© File â†’ Swift Packages â†’ Add Package Dependency, è¾“å…¥InjectæŸ¥æ‰¾, æ·»åŠ package</li></ul><img src="/images/notes/injection_03.png" align=left/><ul><li>åœ¨å·¥ç¨‹æ‰€æœ‰çš„Targetä¸­è®¾ç½® Other Linker Flag, æ·»åŠ  -Xlinker -interposable</li></ul><img src="/images/notes/injection_04.png" align=left/><h3>ä»£ç è®¾ç½®</h3><ul><li>å¯¼å…¥å¤´æ–‡ä»¶</li><li>æ·»åŠ  @ObservedObject private var iO = Inject.observer å˜é‡</li><li>åœ¨éœ€è¦åˆ·æ–°çš„æ§ä»¶ç»“å°¾è°ƒç”¨.enableInjection()</li></ul><pre data-language="Swift"><code><span class="hljs-keyword">import</span> SwiftUI
<span class="hljs-keyword">import</span> Inject

<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">ContentView</span>: <span class="hljs-title">View</span> </span>{
  @<span class="hljs-type">ObservedObject</span> <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> iO = <span class="hljs-type">Inject</span>.observer
  
    <span class="hljs-keyword">var</span> body: some <span class="hljs-type">View</span> {
        <span class="hljs-type">Text</span>(<span class="hljs-string">"Hello, !"</span>)
            .padding()
            .enableInjection()
    }
}
</code></pre><h3>Debug</h3><ul><li>è¿è¡Œä»£ç çœ‹åˆ°ä»¥ä¸‹è¾“å‡ºå°±ä»£ç é…ç½®æˆåŠŸäº†</li></ul><pre data-language="markdown"><code>ğŸ’‰ InjectionIII connected /Demo/SwiftUI<span class="hljs-emphasis">_Widget/SwiftUI_</span>Widget.xcodeproj
ğŸ’‰ Watching files under /Demo/SwiftUI_Widget
ğŸ’‰ ğŸ’‰ âš ï¸ Your project file seems to be in the Desktop or Documents folder and may prevent InjectionIII working as it has special permissions.
</code></pre><ul><li>ä¿®æ”¹åCtrl+S ä¿å­˜å°±èƒ½çœ‹åˆ°ç¥å¥‡çš„åˆ·æ–°æ•ˆæœäº†</li></ul><pre data-language="markdown"><code>ğŸ’‰ Compiling /Demo/SwiftUI<span class="hljs-emphasis">_Widget/SwiftUI_</span>Widget/ContentView.swift
ğŸ’‰ Loading .dylib ...
ğŸ’‰ Loaded .dylib - Ignore any duplicate class warning â¬†ï¸
ğŸ’‰ Interposed 3 function references.
ğŸ’‰ Injected type #1 'SwiftUI_Widget.ContentView'
ğŸ’‰ Injected type #2 'SwiftUI<span class="hljs-emphasis">_Widget.ContentView_</span>Previews'
</code></pre><ul><li>è¿™æ˜¯SwiftUIçš„é…ç½®è¿‡ç¨‹ï¼Œå…¶ä»–å·¥ç¨‹å¯ä»¥å‚è€ƒå®˜æ–¹çš„æ–‡æ¡£</li></ul></div></div><div><div id="gitalk-container"></div>  <script type="text/javascript">
     var gitalk = new Gitalk({
       clientID: 'b95d503a9717272f665d',
       clientSecret: 'a881d3da92d2a2bd0ca6d17e2465935444a32b5d',
       repo: 'pdso.github.io',
       owner: 'pdso',
       admin: ['pdso'],
       id: location.pathname,
       distractionFreeMode: true
     })
     gitalk.render('gitalk-container')
 </script></div></div><div class="footer pure-u-1"><div class="pure-u-1">Â© 2015-2022 pdğŸ¤©</div><div class="pure-u-1">Generated using <a href="https://github.com/johnsundell/publish">Publish</a></div></div></div></body></html>