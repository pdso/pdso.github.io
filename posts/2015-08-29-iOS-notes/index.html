<!DOCTYPE html><html lang="zh"><head><title>pd🤩 - iOS Developer</title><meta name="twitter:title" content="pd🤩 - iOS Developer"/><meta name="og:title" content="pd🤩 - iOS Developer"/><meta charset="UTF-8" name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="https://unpkg.com/purecss@1.0.1/build/pure-min.css" integrity="sha384-oAOxQR6DkCoMliIh8yFnu25d7Eq/PHS21PClpwjOTeU2jRSq11vu66rf90/cZr47" crossorigin="anonymous"/><link rel="stylesheet" href="https://unpkg.com/purecss@1.0.1/build/grids-responsive-min.css"/><link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css"/><link rel="stylesheet" href="/Pure/styles.css"/><link rel="stylesheet" href="/all.css"/></head><body><div id="layout" class="pure-g"><div><div class="pure-menu pure-menu-horizontal pure-u-1-1 top-header"><a class="pure-menu-heading" href="/">Just do it</a><ul class="pure-menu-list"><li class="pure-menu-item"><a class="pure-menu-link" href="/about">About</a></li><li class="pure-menu-item"><a class="pure-menu-link" href="/posts">Notes</a></li><li class="pure-menu-item"><a class="pure-menu-link" href="/life">Life</a></li><li class="pure-menu-item"><a class="pure-menu-link" href="/other">Other</a></li></ul></div></div><div class="sidebar pure-u-1 pure-u-md-1-4"><div class="header"><div id="layout" class="pure-g"><div class="author__avatar"><img src="https://avatars.githubusercontent.com/u/8196592?v=4"/></div><div class="pure-u-md-1-1 pure-u-3-4"><h1 class="brand-title">pd🤩</h1><h3 class="brand-tagline">iOS Developer</h3></div></div><div id="layout" class="pure-g"><div class="pure-u-md-1-1"><a href="https://en.wikipedia.org/wiki/Shenzhen"><i class="fas fa-map-marker-alt l-box social-icon"></i><a class="social-media" href="https://en.wikipedia.org/wiki/Shenzhen">深圳, 广东</a></a></div><div class="pure-u-md-1-1"><a href="mailto:alan.funs@gmail.com"><i class="fas fa-envelope-open-text l-box social-icon"></i><a class="social-media" href="mailto:alan.funs@gmail.com">Email</a></a></div><div class="pure-u-md-1-1"><a href="https://github.com/pdso"><i class="fab fa-github-square l-box social-icon"></i><a class="social-media" href="https://github.com/pdso">GitHub</a></a></div></div></div></div><div class="content pure-u-1 pure-u-md-3-5 pure-u-xl-6-10"><h2 class="post-title"><a href="/posts/2015-08-29-iOS-notes">iOS-notes</a></h2><div class="post-meta"><div class="post-date">August 29, 2015</div><div class="post-tags"><a class="post-category post-category-ios tag variant-1" href="/tags/ios">iOS</a><a class="post-category post-category-uikit tag variant-6" href="/tags/uikit">UIKit</a></div></div><div class="post-description"><div><blockquote><p>很多来自<a href="http://stackoverflow.com">stackoverflow</a></p></blockquote><h2>代码</h2><ul><li>使用storyBoard的时候 <code>adding subview to UIImageView</code> 拖一个<code>UIView</code>把它的类型改为<code>UIImageView</code>这时候就能在这个<code>View</code>在添加子视图了。</li></ul><ul><li>像<code>tree</code> 命令一样显示<code>view</code>的层次结构。</li></ul><pre data-language="Swift"><code>[<span class="hljs-keyword">self</span>.view recursiveDescription]
</code></pre><ul><li><code>tableView</code>滚动的时候始终以<code>row</code>的高度为单位。 首先想到的是<code>tableView</code>继承自<code>scrollView</code>也有<code>pagingEnabled</code>属性。 设置这个属性之后会发现,滚动的时候是以<code>tableView</code>的<code>height</code>为单位滚的。 实现以下这个代理方法就可以解决了,滚动结束的时候始终停留在某个<code>row</code>上面并且还能够获得<code>indexPath</code>.</li></ul><pre data-language="Swift"><code>-(void)scrollViewWillEndDragging:(<span class="hljs-type">UIScrollView</span>*)scrollView withVelocity:(<span class="hljs-type">CGPoint</span>)velocity targetContentOffset:(<span class="hljs-keyword">inout</span> <span class="hljs-type">CGPoint</span>*)targetContentOffset {

    <span class="hljs-comment">// Get index path for target row</span>
    <span class="hljs-type">NSIndexPath</span>* indexPath = [<span class="hljs-keyword">self</span>.tableView indexPathForRowAtPoint:(*targetContentOffset)];

    <span class="hljs-comment">// Set new target</span>
    (*targetContentOffset) = [<span class="hljs-keyword">self</span>.tableView rectForRowAtIndexPath:indexPath].origin;
}
</code></pre><ul><li>去掉tableView多余的行 之前一直根据行数来设置tableView的高度😂其实不用这么麻烦<ul></ul></li></ul><pre data-language="Swift"><code>  <span class="hljs-keyword">self</span>.tableView.tableFooterView = [<span class="hljs-type">UIView</span> alloc] <span class="hljs-keyword">init</span>]
</code></pre><ul><li>点击self.view 键盘收起</li></ul><pre data-language="swift"><code>- (void) touchesBegan:(<span class="hljs-type">NSSet</span>&lt;<span class="hljs-type">UITouch</span> *&gt; *)touches withEvent:(<span class="hljs-type">UIEvent</span> *)event{
    [_searchBar endEditing:<span class="hljs-type">YES</span>];
}
</code></pre><p>其实还有一个神器<a href="https://github.com/hackiftekhar/IQKeyboardManager">IQKeyboardManager</a></p><ul><li>更改UI控件系统默认样式</li></ul><pre data-language="Swift"><code><span class="hljs-comment">//黑色改白色 不要忘记设置plist</span>
[[<span class="hljs-type">UIApplication</span> sharedApplication] setStatusBarStyle:<span class="hljs-type">UIStatusBarStyleLightContent</span>];
<span class="hljs-comment">//导航条颜色</span>
[[<span class="hljs-type">UINavigationBar</span> appearance] setBarTintColor:[<span class="hljs-type">UIColor</span> whiteColor]];
<span class="hljs-comment">//title的颜色和字体</span>
[[<span class="hljs-type">UINavigationBar</span> appearance] setTitleTextAttributes:@{<span class="hljs-type">NSForegroundColorAttributeName</span>:[<span class="hljs-type">UIColor</span> whiteColor], <span class="hljs-type">NSFontAttributeName</span>:[<span class="hljs-type">UIFont</span> systemFontOfSize:<span class="hljs-number">14</span>.0f]}];
<span class="hljs-comment">//透明or不透明。这个会影响storyBoard纵坐标的位置。注意这个方法与`SetbackgroundImageForBarMetrics`一起使用时导航的变化。</span>
[[<span class="hljs-type">UINavigationBar</span> appearance] setTranslucent:<span class="hljs-type">NO</span>];
<span class="hljs-comment">//serarchBar的颜色,比如说取消按钮。再也不会遍历子视图了。</span>
[[<span class="hljs-type">UISearchBar</span> appearance] setTintColor:[<span class="hljs-type">UIColor</span> whiteColor]];
</code></pre><p>每个控件的<code>appearance</code>都可以去看下。有时候能省很多事。不用一个个的单独设置。</p><h2>其他</h2><ul><li>tableView上下拉刷新崩溃 上下刷新频繁操作时数组很容易越界。之前为了解决这个问一直很头大。判断上拉没结束不让下拉，越界的时候刷新tableView之类的。偶尔一次把<code>tableView reload</code>写在了结束刷上下拉刷新方法之前,竟然不崩溃。 &gt;tableView数据源变化之后尽可能早的刷新tableView,这样数组越界的可能性就会降低很多。</li></ul><ul><li><code>Xcode</code>archive之后上传报错 <code>ERROR ITMS-90207: "Invalid Bundle. The bundle at 'example.app' does not contain a bundle executable</code></li></ul><blockquote><p>用<code>vi</code>打开<code>Info.plist</code>检查有没有特殊字符。有时候从别的地方复制过来的会有特殊字符，删掉重新添加再打包就可以上传了。</p></blockquote><ul><li>在UILabel的text后面增加一些空格,并右对齐. 右对齐后空格无法显示。<code>iOS7</code>+的UILabel会自动将text行尾的空白符全部去除。半角空格<code>\0x20</code>和制表符<code>\t</code>除外。在text后面追加这两个符号即可。</li></ul><ul><li><code>Xcode</code> 调试的状态显示<code>indexing....</code>,卡很久</li></ul><pre data-language="Swift"><code><span class="hljs-type">Open</span> your <span class="hljs-type">Project</span> <span class="hljs-type">Folder</span>.
<span class="hljs-type">Find</span> <span class="hljs-type">ProjectName</span>.xcodeproj file.
<span class="hljs-type">Right</span>-<span class="hljs-type">Click</span> <span class="hljs-type">Copy</span> and <span class="hljs-type">Paste</span> to <span class="hljs-type">Safe</span> <span class="hljs-type">Place</span>.
<span class="hljs-type">Right</span>-<span class="hljs-type">Click</span> <span class="hljs-type">Show</span> <span class="hljs-type">Package</span> <span class="hljs-type">Contents</span>.
<span class="hljs-type">Find</span> project.xcworkspace file and delete that file.
<span class="hljs-type">Reopen</span> <span class="hljs-type">Your</span> <span class="hljs-type">Project</span> and clean and <span class="hljs-type">Rebuild</span>.
</code></pre><ul><li>自定义通知(远程和本地)的声音文件可以放入bundle文件夹,注册推送的时候声音文件填写对应的路径即可。</li></ul><pre data-language="Swift"><code><span class="hljs-keyword">let</span> notification = <span class="hljs-type">UILocalNotification</span>()
notification.soundName = <span class="hljs-string">"sound.bundle/"</span> + xxx.wav
</code></pre><ul><li><code>Swift</code> <code>print</code>在<code>Xcode</code>-&gt;<code>Devices</code>-&gt; 'xxx的iPhone8' 不会打印日志, <code>NSLog</code>会打印。</li></ul></div></div><div id="disqus_thread"></div><script src="/Scripts/disqus.js"></script><noscript>Please enable JavaScript to view the comments</noscript></div><div class="footer pure-u-1"><div class="pure-u-1">© 2015-2022 pd🤩</div><div class="pure-u-1">Generated using <a href="https://github.com/johnsundell/publish">Publish</a></div></div></div></body></html>